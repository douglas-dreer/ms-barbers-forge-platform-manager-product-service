# Production Environment Configuration for Manager Product Service
# Copy this file to .env and customize for your production environment

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
DATABASE_PROTOCOL=postgresql
DATABASE_HOST=postgres-db
DATABASE_PORT=5432
DATABASE_NAME=manager_product_db
DATABASE_USERNAME=postgres
# SECURITY: Use Docker secrets or external secret management in production
DATABASE_PASSWORD=CHANGE_ME_IN_PRODUCTION

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
# Spring Profiles
SPRING_PROFILES_ACTIVE=prod

# Server Configuration
SERVER_PORT=8080
SERVER_SERVLET_CONTEXT_PATH=/api

# =============================================================================
# JPA/HIBERNATE CONFIGURATION
# =============================================================================
SPRING_JPA_HIBERNATE_DDL_AUTO=validate
SPRING_JPA_SHOW_SQL=false
SPRING_JPA_PROPERTIES_HIBERNATE_FORMAT_SQL=false
SPRING_JPA_PROPERTIES_HIBERNATE_DIALECT=org.hibernate.dialect.PostgreSQLDialect
SPRING_JPA_PROPERTIES_HIBERNATE_JDBC_BATCH_SIZE=25
SPRING_JPA_PROPERTIES_HIBERNATE_ORDER_INSERTS=true
SPRING_JPA_PROPERTIES_HIBERNATE_ORDER_UPDATES=true
SPRING_JPA_PROPERTIES_HIBERNATE_JDBC_BATCH_VERSIONED_DATA=true

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOGGING_LEVEL_ROOT=WARN
LOGGING_LEVEL_BR_COM_BARBERS_FORGE=INFO
LOGGING_LEVEL_ORG_SPRINGFRAMEWORK_WEB=INFO
LOGGING_LEVEL_ORG_HIBERNATE_SQL=WARN
LOGGING_PATTERN_CONSOLE=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
LOGGING_PATTERN_FILE=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# =============================================================================
# ACTUATOR CONFIGURATION
# =============================================================================
MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE=health,info,metrics,prometheus
MANAGEMENT_ENDPOINT_HEALTH_SHOW_DETAILS=when-authorized
MANAGEMENT_ENDPOINT_HEALTH_SHOW_COMPONENTS=always
MANAGEMENT_SECURITY_ENABLED=true
MANAGEMENT_SERVER_PORT=8081

# Health Check Configuration
MANAGEMENT_HEALTH_DISKSPACE_ENABLED=true
MANAGEMENT_HEALTH_DB_ENABLED=true
MANAGEMENT_HEALTH_PING_ENABLED=true

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# CORS Configuration (adjust for your frontend domains)
CORS_ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=*
CORS_ALLOW_CREDENTIALS=true

# =============================================================================
# JVM CONFIGURATION
# =============================================================================
# Memory settings (adjust based on your container limits)
JAVA_OPTS=-Xms512m -Xmx1g -XX:+UseG1GC -XX:+UseContainerSupport -XX:MaxRAMPercentage=75.0

# GC Settings
JAVA_OPTS_GC=-XX:+UseG1GC -XX:+UseStringDeduplication -XX:+OptimizeStringConcat

# Security Settings
JAVA_OPTS_SECURITY=-Djava.security.egd=file:/dev/./urandom

# =============================================================================
# MONITORING AND OBSERVABILITY
# =============================================================================
# Metrics Configuration
MANAGEMENT_METRICS_EXPORT_PROMETHEUS_ENABLED=true
MANAGEMENT_METRICS_DISTRIBUTION_PERCENTILES_HISTOGRAM_HTTP_SERVER_REQUESTS=0.5,0.9,0.95,0.99
MANAGEMENT_METRICS_TAGS_APPLICATION=manager-product-service
MANAGEMENT_METRICS_TAGS_ENVIRONMENT=production

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================
# Connection Pool Settings
SPRING_DATASOURCE_HIKARI_MAXIMUM_POOL_SIZE=20
SPRING_DATASOURCE_HIKARI_MINIMUM_IDLE=5
SPRING_DATASOURCE_HIKARI_CONNECTION_TIMEOUT=30000
SPRING_DATASOURCE_HIKARI_IDLE_TIMEOUT=600000
SPRING_DATASOURCE_HIKARI_MAX_LIFETIME=1800000
SPRING_DATASOURCE_HIKARI_LEAK_DETECTION_THRESHOLD=60000

# HTTP Configuration
SERVER_TOMCAT_MAX_THREADS=200
SERVER_TOMCAT_MIN_SPARE_THREADS=10
SERVER_TOMCAT_CONNECTION_TIMEOUT=20000
SERVER_TOMCAT_KEEP_ALIVE_TIMEOUT=20000
SERVER_TOMCAT_MAX_KEEP_ALIVE_REQUESTS=100

# =============================================================================
# BUILD CONFIGURATION (for CI/CD)
# =============================================================================
BUILD_VERSION=latest
BUILD_DATE=
VCS_REF=

# =============================================================================
# DOCKER COMPOSE OVERRIDES
# =============================================================================
# Compose project name
COMPOSE_PROJECT_NAME=manager-product-service

# Docker registry (for production deployments)
DOCKER_REGISTRY=your-registry.com
DOCKER_IMAGE_TAG=latest

# =============================================================================
# EXTERNAL SERVICES (customize as needed)
# =============================================================================
# Redis (if using caching)
# REDIS_HOST=redis
# REDIS_PORT=6379
# REDIS_PASSWORD=

# Message Queue (if using)
# RABBITMQ_HOST=rabbitmq
# RABBITMQ_PORT=5672
# RABBITMQ_USERNAME=guest
# RABBITMQ_PASSWORD=guest

# =============================================================================
# BACKUP AND MAINTENANCE
# =============================================================================
# Database backup settings
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=your-backup-bucket

# =============================================================================
# ALERTS AND NOTIFICATIONS
# =============================================================================
# Webhook for health check alerts
HEALTH_CHECK_WEBHOOK_URL=https://your-monitoring-system.com/webhook
ALERT_EMAIL=ops@yourcompany.com

# =============================================================================
# NOTES
# =============================================================================
# 1. Never commit this file with real passwords to version control
# 2. Use Docker secrets or external secret management for sensitive data
# 3. Adjust memory settings based on your container resource limits
# 4. Monitor application performance and adjust settings accordingly
# 5. Regularly update and rotate passwords and secrets
# 6. Test configuration changes in staging before applying to production